\hypertarget{hal___w_d_8c}{}\doxysubsection{hal\+\_\+\+W\+D.\+c File Reference}
\label{hal___w_d_8c}\index{hal\_WD.c@{hal\_WD.c}}


Functions to manage Watchdog.  


{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$ti/drivers/\+I2\+C.\+h$>$}\newline
{\ttfamily \#include $<$ti/drivers/\+Watchdog.\+h$>$}\newline
{\ttfamily \#include \char`\"{}Board.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}hal\+\_\+\+G\+P\+I\+O.\+h\char`\"{}}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
Watchdog\+\_\+\+Handle \mbox{\hyperlink{hal___w_d_8c_ab63aa87a48ad39bb42dbd21fb4621d7c_ab63aa87a48ad39bb42dbd21fb4621d7c}{Startup\+\_\+\+Watchdog}} (uint\+\_\+least8\+\_\+t index, uint32\+\_\+t timeout)
\begin{DoxyCompactList}\small\item\em Watchdog Startup Function. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{hal___w_d_8c_aa96687d19cd114877bdc04a78c91e009_aa96687d19cd114877bdc04a78c91e009}{watchdog\+Callback}} (uintptr\+\_\+t watchdog\+Handle)
\begin{DoxyCompactList}\small\item\em Watchdog callback Function. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
I2\+C\+\_\+\+Handle \mbox{\hyperlink{hal___w_d_8c_ac3886ff8eedde1ea48fb46d450100ac6_ac3886ff8eedde1ea48fb46d450100ac6}{i2c}}
\end{DoxyCompactItemize}


\doxysubsubsection{Detailed Description}
Functions to manage Watchdog. 

\begin{DoxyVersion}{Version}
1.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
07/05/2019 
\end{DoxyDate}
\begin{DoxyAuthor}{Author}
A.\+Irizar @tittle Watchdog functions 
\end{DoxyAuthor}


Definition in file \mbox{\hyperlink{hal___w_d_8c_source}{hal\+\_\+\+W\+D.\+c}}.



\doxysubsubsection{Function Documentation}
\mbox{\Hypertarget{hal___w_d_8c_ab63aa87a48ad39bb42dbd21fb4621d7c_ab63aa87a48ad39bb42dbd21fb4621d7c}\label{hal___w_d_8c_ab63aa87a48ad39bb42dbd21fb4621d7c_ab63aa87a48ad39bb42dbd21fb4621d7c}} 
\index{hal\_WD.c@{hal\_WD.c}!Startup\_Watchdog@{Startup\_Watchdog}}
\index{Startup\_Watchdog@{Startup\_Watchdog}!hal\_WD.c@{hal\_WD.c}}
\doxyparagraph{\texorpdfstring{Startup\_Watchdog()}{Startup\_Watchdog()}}
{\footnotesize\ttfamily Watchdog\+\_\+\+Handle Startup\+\_\+\+Watchdog (\begin{DoxyParamCaption}\item[{uint\+\_\+least8\+\_\+t}]{index,  }\item[{uint32\+\_\+t}]{timeout }\end{DoxyParamCaption})}



Watchdog Startup Function. 

This function
\begin{DoxyEnumerate}
\item Starts up a watchdog instance
\end{DoxyEnumerate}


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em uint\+\_\+least8\+\_\+t} & index \\
\hline
\mbox{\texttt{ in}}  & {\em uint32\+\_\+t} & timeout\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Watchdog\+\_\+\+Handle wd A \#\+Watchdog\+\_\+\+Handle upon success. N\+U\+LL if an error occurs, or if the indexed U\+A\+RT peripheral is already opened. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{hal___w_d_8c_source_l00060}{60}} of file \mbox{\hyperlink{hal___w_d_8c_source}{hal\+\_\+\+W\+D.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00060                                                                         \{}
\DoxyCodeLine{00061 }
\DoxyCodeLine{00062     uint32\_t reloadValue;}
\DoxyCodeLine{00063     Watchdog\_Params wdParams;}
\DoxyCodeLine{00064     Watchdog\_Handle \mbox{\hyperlink{_sensors_8c_a3ee457ca076a1d77f9e213ddf178edad_a3ee457ca076a1d77f9e213ddf178edad}{wd}};}
\DoxyCodeLine{00065 }
\DoxyCodeLine{00066     Watchdog\_init();}
\DoxyCodeLine{00067     Watchdog\_Params\_init(\&wdParams);}
\DoxyCodeLine{00068     wdParams.callbackFxn = (Watchdog\_Callback) \mbox{\hyperlink{hal___w_d_8c_aa96687d19cd114877bdc04a78c91e009_aa96687d19cd114877bdc04a78c91e009}{watchdogCallback}};}
\DoxyCodeLine{00069     wdParams.debugStallMode = Watchdog\_DEBUG\_STALL\_ON;}
\DoxyCodeLine{00070     wdParams.resetMode = Watchdog\_RESET\_OFF;}
\DoxyCodeLine{00071 }
\DoxyCodeLine{00072     \mbox{\hyperlink{_sensors_8c_a3ee457ca076a1d77f9e213ddf178edad_a3ee457ca076a1d77f9e213ddf178edad}{wd}} = Watchdog\_open(index, \&wdParams);}
\DoxyCodeLine{00073     \textcolor{keywordflow}{if} (\mbox{\hyperlink{_sensors_8c_a3ee457ca076a1d77f9e213ddf178edad_a3ee457ca076a1d77f9e213ddf178edad}{wd}} == NULL) \{                                                         \textcolor{comment}{// Error opening Watchdog}}
\DoxyCodeLine{00074         \textcolor{keywordflow}{while} (1) \{\}}
\DoxyCodeLine{00075     \}}
\DoxyCodeLine{00076 }
\DoxyCodeLine{00077     reloadValue = Watchdog\_convertMsToTicks(\mbox{\hyperlink{_sensors_8c_a3ee457ca076a1d77f9e213ddf178edad_a3ee457ca076a1d77f9e213ddf178edad}{wd}}, timeout);}
\DoxyCodeLine{00078 }
\DoxyCodeLine{00079     \textcolor{keywordflow}{if} (reloadValue != 0) \{}
\DoxyCodeLine{00080         Watchdog\_setReload(\mbox{\hyperlink{_sensors_8c_a3ee457ca076a1d77f9e213ddf178edad_a3ee457ca076a1d77f9e213ddf178edad}{wd}}, reloadValue);}
\DoxyCodeLine{00081     \}}
\DoxyCodeLine{00082 }
\DoxyCodeLine{00083     \textcolor{keywordflow}{return} \mbox{\hyperlink{_sensors_8c_a3ee457ca076a1d77f9e213ddf178edad_a3ee457ca076a1d77f9e213ddf178edad}{wd}};}
\DoxyCodeLine{00084 \}}

\end{DoxyCode}
\mbox{\Hypertarget{hal___w_d_8c_aa96687d19cd114877bdc04a78c91e009_aa96687d19cd114877bdc04a78c91e009}\label{hal___w_d_8c_aa96687d19cd114877bdc04a78c91e009_aa96687d19cd114877bdc04a78c91e009}} 
\index{hal\_WD.c@{hal\_WD.c}!watchdogCallback@{watchdogCallback}}
\index{watchdogCallback@{watchdogCallback}!hal\_WD.c@{hal\_WD.c}}
\doxyparagraph{\texorpdfstring{watchdogCallback()}{watchdogCallback()}}
{\footnotesize\ttfamily void watchdog\+Callback (\begin{DoxyParamCaption}\item[{uintptr\+\_\+t}]{watchdog\+Handle }\end{DoxyParamCaption})}



Watchdog callback Function. 

This function
\begin{DoxyEnumerate}
\item Is a callback for watchdog.\+If the Watchdog Non-\/\+Maskable Interrupt (N\+MI) is called,set to \textquotesingle{}0\textquotesingle{} any output signal and disable the \mbox{\hyperlink{_s_t_a_r_p_o_r_t_s___app_8h_struct_node}{Node}}
\end{DoxyEnumerate}


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em uintptr\+\_\+t} & watchdog\+Handle\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{hal___w_d_8c_source_l00040}{40}} of file \mbox{\hyperlink{hal___w_d_8c_source}{hal\+\_\+\+W\+D.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00040                                                 \{}
\DoxyCodeLine{00041 }
\DoxyCodeLine{00042     I2C\_close(\mbox{\hyperlink{hal___w_d_8c_ac3886ff8eedde1ea48fb46d450100ac6_ac3886ff8eedde1ea48fb46d450100ac6}{i2c}});}
\DoxyCodeLine{00043     \mbox{\hyperlink{hal___g_p_i_o_8c_a4d7ff87c7758b4bbc7b0f6cd4964e3cd_a4d7ff87c7758b4bbc7b0f6cd4964e3cd}{I2C\_As\_GPIO\_Low}}();                                                      \textcolor{comment}{// Puts SCL and SDA signals low to save power}}
\DoxyCodeLine{00044     \mbox{\hyperlink{hal___g_p_i_o_8c_a338ce3ef89288211272b368ddb2b851d_a338ce3ef89288211272b368ddb2b851d}{Node\_Disable}}();                                                         \textcolor{comment}{// Auto Shutdown}}
\DoxyCodeLine{00045 \}}

\end{DoxyCode}


\doxysubsubsection{Variable Documentation}
\mbox{\Hypertarget{hal___w_d_8c_ac3886ff8eedde1ea48fb46d450100ac6_ac3886ff8eedde1ea48fb46d450100ac6}\label{hal___w_d_8c_ac3886ff8eedde1ea48fb46d450100ac6_ac3886ff8eedde1ea48fb46d450100ac6}} 
\index{hal\_WD.c@{hal\_WD.c}!i2c@{i2c}}
\index{i2c@{i2c}!hal\_WD.c@{hal\_WD.c}}
\doxyparagraph{\texorpdfstring{i2c}{i2c}}
{\footnotesize\ttfamily I2\+C\+\_\+\+Handle i2c}



Definition at line \mbox{\hyperlink{_s_t_a_r_p_o_r_t_s___app_8c_source_l00066}{66}} of file \mbox{\hyperlink{_s_t_a_r_p_o_r_t_s___app_8c_source}{S\+T\+A\+R\+P\+O\+R\+T\+S\+\_\+\+App.\+c}}.

